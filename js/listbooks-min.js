function removeArticles(t){var r=t.split(" ");return r.length<=1?t:"a"===r[0]||"the"===r[0]||"an"===r[0]?r.splice(1).join(" "):t}var booklistContent=document.getElementById("booklist-content"),booklistError=document.getElementById("booklist-error"),initialSortButton=document.getElementById("btn-sort-rating"),sortButtons=document.querySelectorAll("[data-sort-by]"),sortButtonsArray=Array.from(sortButtons),xhr=new XMLHttpRequest,books=void 0,sortByKey=function(){function t(t,r){return t.sort(function(t,o){var e=t[r],n=o[r];return"string"==typeof e&&(e=removeArticles(e.toLowerCase())),"string"==typeof n&&(n=removeArticles(n.toLowerCase())),e<n?-1:e>n?1:0})}return t}(),parseBooks=function(){function t(t){return t}return t}(),buildHTML=function(){function t(t){for(var r="",o=0;o<t.length;o+=1)r+="<tr><td>"+String(t[o].title)+"</td><td>"+String(t[o].author)+'</td><td class="num">'+String(t[o].rating)+'</td><td class="num">'+String(t[o].length)+"</td><td>"+String(t[o].series)+"</td></tr>";return r}return t}(),sortBy=function(){function t(){sortByKey(books,this.dataset.sortBy),"true"===this.dataset.sortActive?"ascending"===this.dataset.sortOrder?(booklistContent.innerHTML=buildHTML(books.reverse()),this.dataset.sortOrder="descending"):(booklistContent.innerHTML=buildHTML(books),this.dataset.sortOrder="ascending"):(sortButtonsArray.forEach(function(t){t.dataset.sortActive="false"}),booklistContent.innerHTML=buildHTML(books),this.dataset.sortActive="true",this.dataset.sortOrder="ascending")}return t}();sortButtonsArray.forEach(function(t){t.addEventListener("click",sortBy)}),xhr.open("GET","data/books.json",!0),xhr.onload=function(){function t(){if(xhr.status>=200&&xhr.status<400)books=parseBooks(JSON.parse(xhr.responseText)),sortByKey(books,initialSortButton.dataset.sortBy),booklistContent.innerHTML=buildHTML(books.reverse()),initialSortButton.dataset.sortOrder="descending",initialSortButton.dataset.sortActive="true";else{booklistError.innerHTML="Whoops! Something went wrong. Please try again."}}return t}(),xhr.onerror=function(){function t(){booklistError.innerHTML="Whoops! We couldn't reach the server. Please try again."}return t}(),xhr.send();