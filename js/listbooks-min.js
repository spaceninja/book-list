var booklistContent=document.getElementById("booklist-content"),booklistError=document.getElementById("booklist-error"),booklistSort=document.getElementById("booklist-sort"),xhr=new XMLHttpRequest,books=[],sortByKeys=function(){function t(t,n,o,e){var r="";return r="descending"===e?firstBy(n,{ignoreCase:!0,direction:-1}).thenBy(o,{ignoreCase:!0,direction:-1}):firstBy(n,{ignoreCase:!0}).thenBy(o,{ignoreCase:!0}),t.sort(r)}return t}(),buildHTML=function(){function t(t){for(var n="",o=0;o<t.length;o+=1)n+="<tr><td>"+String(t[o].title)+"</td><td>"+String(t[o].author)+'</td><td class="num">'+String(t[o].rating)+'</td><td class="num">'+String(t[o].length)+"</td><td>"+String(t[o].series||"")+"</td></tr>\n";return n}return t}(),sortBy=function(){function t(){var t=this.options[this.selectedIndex];sortByKeys(books,t.value,t.dataset.sortSecondary,t.dataset.sortOrder),booklistContent.innerHTML=buildHTML(books)}return t}();booklistSort.addEventListener("change",sortBy),xhr.open("GET","data/books.json",!0),xhr.onload=function(){function t(){if(xhr.status>=200&&xhr.status<400)books=JSON.parse(xhr.responseText),booklistSort.dispatchEvent(new Event("change"));else{booklistError.innerHTML="Whoops! Something went wrong. Please try again."}}return t}(),xhr.onerror=function(){function t(){booklistError.innerHTML="Whoops! We couldn't reach the server. Please try again."}return t}(),xhr.send();