var booklistContent=document.getElementById("booklist-content"),booklistError=document.getElementById("booklist-error"),initialSortButton=document.getElementById("btn-sort-rating"),sortButtons=document.querySelectorAll("[data-sort-by]"),sortButtonsArray=Array.from(sortButtons),xhr=new XMLHttpRequest,books=void 0,sortByKey=function(){function t(t,r,o,e){var n="";return n="descending"===e?firstBy(r,{ignoreCase:!0,direction:-1}).thenBy(o,{ignoreCase:!0,direction:-1}):firstBy(r,{ignoreCase:!0}).thenBy(o,{ignoreCase:!0}),t.sort(n)}return t}(),buildHTML=function(){function t(t){for(var r="",o=0;o<t.length;o+=1)r+="<tr><td>"+String(t[o].title)+"</td><td>"+String(t[o].author)+'</td><td class="num">'+String(t[o].rating)+'</td><td class="num">'+String(t[o].length)+"</td><td>"+String(t[o].series||"")+"</td></tr>\n";return r}return t}(),sortBy=function(){function t(){sortByKey(books,this.dataset.sortBy,this.dataset.sortSecondary,this.dataset.sortOrder),"true"===this.dataset.sortActive?"true"===this.dataset.sortReverse?(booklistContent.innerHTML=buildHTML(books),this.dataset.sortReverse=!1):(booklistContent.innerHTML=buildHTML(books.reverse()),this.dataset.sortReverse=!0):(booklistContent.innerHTML=buildHTML(books),sortButtonsArray.forEach(function(t){t.dataset.sortActive="false",t.dataset.sortReverse="false"}),this.dataset.sortActive="true")}return t}();sortButtonsArray.forEach(function(t){t.addEventListener("click",sortBy)}),xhr.open("GET","data/books.json",!0),xhr.onload=function(){function t(){if(xhr.status>=200&&xhr.status<400)books=JSON.parse(xhr.responseText),sortByKey(books,initialSortButton.dataset.sortBy,initialSortButton.dataset.sortSecondary,initialSortButton.dataset.sortOrder),booklistContent.innerHTML=buildHTML(books),initialSortButton.dataset.sortActive="true";else{booklistError.innerHTML="Whoops! Something went wrong. Please try again."}}return t}(),xhr.onerror=function(){function t(){booklistError.innerHTML="Whoops! We couldn't reach the server. Please try again."}return t}(),xhr.send();